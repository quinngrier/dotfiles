#! /bin/sh -
#
# Usage: git u [<remote=upstream> [<branch=master>]]
#
# Switches to <branch>, then fetches and merges it from <remote>.
#

case $# in
  0 | 1 | 2) ;;
  *)
    cat >&2 <<'EOF'
Usage: git u [<remote=upstream> [<branch=master>]]

Switches to <branch>, then fetches and merges it from <remote>.
EOF
    exit 1
  ;;
esac

git=${_:?}

remote=${1-upstream}
branch=${2-master}
message="Merge $remote/$branch into $branch"
"$git" checkout "$branch" || exit $?
"$git" fetch -n -- "$remote" "$branch" || exit $?
"$git" merge -m "$message" -- "$remote/$branch" || exit $?

#
# The authors of this file have waived all copyright and
# related or neighboring rights to the extent permitted by
# law as described by the CC0 1.0 Universal Public Domain
# Dedication. You should have received a copy of the full
# dedication along with this file, typically as a file
# named <CC0-1.0.txt>. If not, it may be available at
# <https://creativecommons.org/publicdomain/zero/1.0/>.
#
